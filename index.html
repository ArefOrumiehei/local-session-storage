<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Web Storage Api</title>
</head>
<body>
  <div class="top-bar">
    <div class="left">
      <select id="language" onchange="changeLanguage()">
        <option value="fa">fa</option>
        <option value="en">en</option>
      </select>
      <button class="mode-toggle" onclick="toggleMode()">ğŸŒ“</button>
    </div>
    <div class="right">
      <div id="timer" style="font-weight: bold; font-size: 1.2rem; margin-right: 1rem;"></div>
    </div>
  </div>

  <div class="container">
    <h2 id="welcome"></h2>
    <div id="avatar-selection">
      <p id="choose-avatar-text">Choose an avatar:</p>
      <div class="avatars">
        <span class="avatar" onclick="selectAvatar('ğŸ¦Š')">ğŸ¦Š</span>
        <span class="avatar" onclick="selectAvatar('ğŸ±')">ğŸ±</span>
        <span class="avatar" onclick="selectAvatar('ğŸ¼')">ğŸ¼</span>
        <span class="avatar" onclick="selectAvatar('ğŸ¦')">ğŸ¦</span>
      </div>
    </div>

    <div class="btns">
      <div class="clear-btns">
        <button id="local-clear" onclick="clearLocal()">Clear Local Storage</button>
        <button id="session-clear" onclick="clearSession()">Clear Session Storage</button>
      </div>
    </div>
  </div>

  <div class="colors-container">
    <div id="color-picker"></div>
    <div class="colors-save-btns">
      <button onclick="saveColorForAllTabs()">Save for all tabs</button>
      <button onclick="saveColorForCurrentTab()">Save for this tab only</button>
    </div>
  </div>

  <div class="guide-text-container-en">
    <p class="guide-text">
      1.Right-click anywhere on the page and choose
      "Inspect" (or just press F12 or Ctrl + Shift + I).<br>

      2.In the opened Developer Tools (DevTools), click the
      "Application" tab at the top.<br>

      3.On the left sidebar:<br>

      -Click the arrow next to "Local Storage" and select your siteâ€™s domain.<br>

      -Click "Session Storage" and select your siteâ€™s domain.<br>

      4.Youâ€™ll now see all the keys and values stored in each storage area.<br>

      Tip:<br>
      -You can edit or delete any entry directly from this panel.<br>

      -Any changes your JavaScript makes (like background color) will appear here live.
    </p>
  </div>

  <div class="guide-text-container-fa">
    <p class="guide-text">
      Û±.Ø±ÙˆÛŒ ØµÙØ­Ù‡ Ø±Ø§Ø³Øªâ€ŒÚ©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ Ùˆ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÛŒ
      "Inspect"  Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†.
      ÛŒØ§ Ø§Ø² Ú©Ù„ÛŒØ¯ Ù…ÛŒØ§Ù†â€ŒØ¨Ø± F12 ÛŒØ§ Ctrl + Shift + I Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.<br>

    Û².Ø§Ø² Ù¾Ù†Ø¬Ø±Ù‡â€ŒÛŒ Ø§Ø¨Ø²Ø§Ø± ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡ (DevTools)ØŒ Ø¨Ø§Ù„Ø§ Ø³Ù…Øª Ø±Ø§Ø³Øª Ø±ÙˆÛŒ ØªØ¨
      "Application" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.<br>

    Û³.Ø­Ø§Ù„Ø§ Ø§Ø² Ø³ØªÙˆÙ† Ø³Ù…Øª Ú†Ù¾:<br>

    - Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¯Ù† LocalStorageØŒ Ø±ÙˆÛŒ ÙÙ„Ø´ Ú©Ù†Ø§Ø±
      "Local Storage" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ Ùˆ Ø¢Ø¯Ø±Ø³ Ø³Ø§ÛŒØª Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.<br>

      - Ø¨Ø±Ø§ÛŒ SessionStorageØŒ Ø±ÙˆÛŒ
      "Session Storage" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¢Ø¯Ø±Ø³ Ø³Ø§ÛŒØªØª Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.<br>

      Ûµ.Ø¯Ø± Ù¾Ù†Ù„ Ø³Ù…Øª Ø±Ø§Ø³ØªØŒ Ù„ÛŒØ³ØªÛŒ Ø§Ø² Ú©Ù„ÛŒØ¯Ù‡Ø§ (key) Ùˆ Ù…Ù‚Ø§Ø¯ÛŒØ± (value) Ø±Ùˆ Ù…ÛŒâ€ŒØ¨ÛŒÙ†ÛŒØ¯ Ú©Ù‡ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.<br>

      Ù†Ú©ØªÙ‡:<br>
      -Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ Ø±ÙˆÛŒ Ù‡Ø± Ù…Ù‚Ø¯Ø§Ø± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ Ùˆ Ø§ÙˆÙ†Ùˆ ÙˆÛŒØ±Ø§ÛŒØ´ ÛŒØ§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯.<br>

      -Ø§Ú¯Ø± Ù…Ù‚Ø¯Ø§Ø± Ø¬Ø¯ÛŒØ¯ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ù‡ (Ù…Ø«Ù„Ø§Ù‹ Ø±Ù†Ú¯ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡)ØŒ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ø¸Ø§Ù‡Ø± Ù…ÛŒâ€ŒØ´Ù‡.<br>
    </p>
  </div>

  <script>
    const langData = {
      fa: {
        chooseAvatarText: "ÛŒÚ© Ø¢ÙˆØ§ØªØ§Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†:",
        button: "Ø°Ø®ÛŒØ±Ù‡",
        localClearBtn: "Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù„ÙˆÚ©Ø§Ù„",
        sessionClearBtn: "Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø³Ø´Ù†",
        saveAllTabsBtn: "Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ ØªØ¨â€ŒÙ‡Ø§",
        saveThisTabBtn: "Ø°Ø®ÛŒØ±Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ØªØ¨",
      },
      en: {
        chooseAvatarText: "Choose an avatar:",
        button: "Save",
        localClearBtn: "Clear Local Storage",
        sessionClearBtn: "Clear Session Storage",
        saveAllTabsBtn: "Save for all tabs",
        saveThisTabBtn: "Save for this tab only",
      }
    };


    let currentLang = localStorage.getItem("lang") || "en";
    let currentMode = localStorage.getItem("mode") || "dark";
    document.getElementById("language").value = currentLang;
    document.body.classList.add(currentMode);

    function selectAvatar(emoji) {
      sessionStorage.setItem("avatar", emoji);
      localStorage.setItem("avatar", emoji);
      showWelcome(emoji);
    }

    function showWelcome(emoji) {
      const names = {
        fa: {
          "ğŸ¦Š": "Ø±ÙˆØ¨Ø§Ù‡ Ø¨Ø§Ù‡ÙˆØ´",
          "ğŸ±": "Ú¯Ø±Ø¨Ù‡ Ù†Ø§Ø²",
          "ğŸ¼": "Ù¾Ø§Ù†Ø¯Ø§ÛŒ Ù…Ù‡Ø±Ø¨ÙˆÙ†",
          "ğŸ¦": "Ø´ÛŒØ± Ø´Ø¬Ø§Ø¹",
          default: "Ø¯ÙˆØ³Øª Ø¹Ø²ÛŒØ²"
        },
        en: {
          "ğŸ¦Š": "Smart Fox",
          "ğŸ±": "Cute Cat",
          "ğŸ¼": "Kind Panda",
          "ğŸ¦": "Brave Lion",
          default: "Dear Friend"
        }
      };

      const lang = currentLang === "fa" ? "fa" : "en";
      const name = names[lang][emoji] || names[lang].default;

      const welcomeMessage = lang === "fa"
        ? `Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒØŒ ${name}!`
        : `Welcome, ${name}!`;

      document.getElementById("avatar-selection").style.display = "none";
      document.getElementById("welcome").innerText = welcomeMessage;
    }

    function applyLanguage() {
      const t = langData[currentLang];
      document.getElementById("choose-avatar-text").innerText = t.chooseAvatarText;
      document.getElementById("local-clear").innerText = t.localClearBtn;
      document.getElementById("session-clear").innerText = t.sessionClearBtn;
      document.querySelector(".colors-save-btns button:nth-child(1)").innerText = t.saveAllTabsBtn;
      document.querySelector(".colors-save-btns button:nth-child(2)").innerText = t.saveThisTabBtn;

      const guideTextEn = document.querySelector(".guide-text-container-en")
      const guideTextFa = document.querySelector(".guide-text-container-fa")

      if (currentLang === "fa" ) {
        guideTextFa.style.display = "block";
        guideTextEn.style.display = "none";
      } else {
        guideTextFa.style.display = "none";
        guideTextEn.style.display = "block";
      }

      const avatar = sessionStorage.getItem("avatar");
      if (avatar) {
        showWelcome(avatar);
      }

      updateTextDirection();
    }

    function changeLanguage() {
      currentLang = document.getElementById("language").value;
      localStorage.setItem("lang", currentLang);
      applyLanguage();
    }

    function toggleMode() {
      document.body.classList.toggle("dark");
      document.body.classList.toggle("light");
      const newMode = document.body.classList.contains("dark") ? "dark" : "light";
      localStorage.setItem("mode", newMode);
    }

    function clearLocal() {
      localStorage.clear();
      location.reload();
    }

    function clearSession() {
      sessionStorage.clear();
      location.reload();
    }

    // Timer Zone
    let seconds = parseInt(sessionStorage.getItem("timeSpent")) || 0;
    const timerElem = document.getElementById("timer");

    function updateTimer() {
      seconds++;
      sessionStorage.setItem("timeSpent", seconds);
      const min = Math.floor(seconds / 60);
      const sec = seconds % 60;
      timerElem.innerText = `${min}:${sec.toString().padStart(2, "0")}`;
    }

    setInterval(updateTimer, 1000);
    updateTimer();

    // Color for card
    const colorOptions = [
      "#ffc2f9", "#c2fff9", "#c2f9ff", "#f9ffc2",
      "#f9c2ff", "#d9f9c2", "#c2d9f9", "#f2c2c2",
      "#e0c2f9", "#b8f9c2", "#f9e2c2", "#c2f0f9"
    ];

    const container = document.getElementById("color-picker");

    colorOptions.forEach(color => {
      const btn = document.createElement("div");
      btn.style.background = color;
      btn.style.width = "24px";
      btn.style.height = "24px";
      btn.style.borderRadius = "50%";
      btn.style.border = "1px solid #000";
      btn.style.cursor = "pointer";
      btn.title = color;
      btn.addEventListener("click", () => {
        document.querySelector(".container").style.background = color;
        sessionStorage.setItem("tempBg", color);
      });
      container.appendChild(btn);
    });

    function saveColorForAllTabs() {
      const bg = sessionStorage.getItem("tempBg");
      if (bg) {
        localStorage.setItem("bgColor", bg);
        applySavedColor();
      }
    }

    function saveColorForCurrentTab() {
      const bg = sessionStorage.getItem("tempBg");
      if (bg) {
        sessionStorage.setItem("bgColor", bg);
        applySavedColor();
      }
    }

    function applySavedColor() {
      const sessionColor = sessionStorage.getItem("bgColor");
      const localColor = localStorage.getItem("bgColor");

      const bg = sessionColor || localColor;
      if (bg) {
        document.querySelector(".container").style.background = bg;
      }
    }

    function updateTextDirection() {
      const textElements = document.querySelectorAll("h2, p, button, select, #welcome, #choose-avatar-text, .guide-text");
      textElements.forEach(el => {
        if (currentLang === "fa") {
          el.classList.add("text-dir-rtl");
          el.classList.remove("text-dir-ltr");
        } else {
          el.classList.add("text-dir-ltr");
          el.classList.remove("text-dir-rtl");
        }
      });
    }

    applySavedColor();    
    applyLanguage();
  </script>
</body>
</html>
